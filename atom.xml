<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一语</title>
  
  <subtitle>活着，永远不是一个人的事</subtitle>
  <link href="http://aword.net/atom.xml" rel="self"/>
  
  <link href="http://aword.net/"/>
  <updated>2022-04-02T08:51:21.820Z</updated>
  <id>http://aword.net/</id>
  
  <author>
    <name>zhyt</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>XAMPP 升级 PHP</title>
    <link href="http://aword.net/upgrade-php-of-xampp/"/>
    <id>http://aword.net/upgrade-php-of-xampp/</id>
    <published>2022-03-31T16:02:56.000Z</published>
    <updated>2022-04-02T08:51:21.820Z</updated>
    
    <content type="html"><![CDATA[<p>Windows 环境，给 XAMPP 升级 PHP 7.4 → 8.0，记录一下要点。</p><ol><li><p>下载 PHP8.0 版本的 XAMPP，提取其中的 <code>php</code> 文件夹，改名为 <code>php8</code> 放到原 XAMPP 根目录，为了不与原 <code>php</code> 文件夹重名。</p></li><li><p>下载对应 8.0 版本的 <code>extension</code> 到 <code>xampp/php8/ext</code>。</p></li><li><p>修改 <code>xampp/php8/php.ini</code> 启用需要的 <code>extension</code>。</p></li><li><p>修改 <code>xampp/php8/php.ini</code> 内文件路径参数，基本都以 <code>\xampp</code> 开头，修改为实际的绝对路径。</p></li><li><p>修改 <code>xampp/apache/conf/extra/httpd-xampp.conf</code>。</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LoadFile &quot;D:/xampp/php/php7ts.dll&quot;</span></span><br><span class="line"><span class="comment"># LoadFile &quot;D:/xampp/php/libpq.dll&quot;</span></span><br><span class="line"><span class="comment"># LoadFile &quot;D:/xampp/php/libsqlite3.dll&quot;</span></span><br><span class="line"><span class="comment"># LoadModule php7_module &quot;D:/xampp/php/php7apache2_4.dll&quot;</span></span><br><span class="line">LoadFile <span class="string">&quot;D:/xampp/php/php8ts.dll&quot;</span></span><br><span class="line">LoadFile <span class="string">&quot;D:/xampp/php/libpq.dll&quot;</span></span><br><span class="line">LoadFile <span class="string">&quot;D:/xampp/php/libsqlite3.dll&quot;</span></span><br><span class="line">LoadModule php_module <span class="string">&quot;D:/xampp/php/php8apache2_4.dll&quot;</span></span><br></pre></td></tr></table></figure><p> 并且把其余所有 <code>php7_module</code> 改为 <code>php_module</code>。</p></li><li><p>关闭 apache，把 <code>xampp/php</code> 改为 <code>xampp/php7.4</code>，把 <code>xampp/php8</code> 改为 <code>xampp/php</code>。</p></li><li><p>启动 apache。无法正常启动的话运行 <code>xampp/apache_start.bat</code>，可以看到报错信息。</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Windows 环境，给 XAMPP 升级 PHP 7.4 → 8.0，记录一下要点。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;下载 PHP8.0 版本的 XAMPP，提取其中的 &lt;code&gt;php&lt;/code&gt; 文件夹，改名为 &lt;code&gt;php8&lt;/code&gt; 放到原 XAMP</summary>
      
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="PHP" scheme="http://aword.net/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>内网搭建 apt mirror</title>
    <link href="http://aword.net/nei-wang-da-jian-apt-mirror/"/>
    <id>http://aword.net/nei-wang-da-jian-apt-mirror/</id>
    <published>2021-12-30T21:52:00.000Z</published>
    <updated>2021-12-30T16:55:13.315Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>Ubuntu20.04 服务器在公司内网，不能连接 Internet，需要在内网搭建 apt 源方便服务器管理。</p><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>用来搭 apt 源的机器是 Win10，只能通过特定的 http 代理才能连接 Internet。</p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>在 Win10 内新建 Ubuntu 虚拟机，设置好 Ubuntu 里 apt 的走公司的 http 代理。</p><span id="more"></span><p>虚拟机里安装 apt-mirror:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install apt-mirror</span><br></pre></td></tr></table></figure><p>修改 apt-mirror 配置文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apt/mirror.list</span><br></pre></td></tr></table></figure><p>默认是下面这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">############# config ##################</span><br><span class="line">#</span><br><span class="line"># set base_path    /var/spool/apt-mirror</span><br><span class="line">#</span><br><span class="line"># set mirror_path  $base_path/mirror</span><br><span class="line"># set skel_path    $base_path/skel</span><br><span class="line"># set var_path     $base_path/var</span><br><span class="line"># set cleanscript $var_path/clean.sh</span><br><span class="line"># set defaultarch  &lt;running host architecture&gt;</span><br><span class="line"># set postmirror_script $var_path/postmirror.sh</span><br><span class="line"># set run_postmirror 0</span><br><span class="line">set nthreads     20</span><br><span class="line">set _tilde 0</span><br><span class="line">#</span><br><span class="line">############# end config ##############</span><br><span class="line"></span><br><span class="line">deb http://archive.ubuntu.com/ubuntu artful main restricted universe multiverse</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu artful-security main restricted universe multiverse</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu artful-updates main restricted universe multiverse</span><br><span class="line">#deb http://archive.ubuntu.com/ubuntu artful-proposed main restricted universe multiverse</span><br><span class="line">#deb http://archive.ubuntu.com/ubuntu artful-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb-src http://archive.ubuntu.com/ubuntu artful main restricted universe multiverse</span><br><span class="line">deb-src http://archive.ubuntu.com/ubuntu artful-security main restricted universe multiverse</span><br><span class="line">deb-src http://archive.ubuntu.com/ubuntu artful-updates main restricted universe multiverse</span><br><span class="line">#deb-src http://archive.ubuntu.com/ubuntu artful-proposed main restricted universe multiverse</span><br><span class="line">#deb-src http://archive.ubuntu.com/ubuntu artful-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">clean http://archive.ubuntu.com/ubuntu</span><br></pre></td></tr></table></figure><p>设置项不做修改，把源改成国内比较快的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>因为 apt-mirror 是用 wget 进行下载，修改 <code>/etc/wgetrc</code> 给 wget 设置好代理。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"># You can set the default proxies for Wget to use for http, https, and ftp.</span><br><span class="line"># They will override the value in the environment.</span><br><span class="line">#https_proxy = http://proxy.yoyodyne.com:18023/</span><br><span class="line">#http_proxy = http://proxy.yoyodyne.com:18023/</span><br><span class="line">#ftp_proxy = http://proxy.yoyodyne.com:18023/</span><br><span class="line"></span><br><span class="line"># If you do not want to use proxy at all, set this to off.</span><br><span class="line">#use_proxy = on</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>准备好硬盘空间，我没下载源码 <code>deb-src</code>，用掉了将近 200G。</p><p>然后运行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-mirror</span><br></pre></td></tr></table></figure><p>耐心等待。</p><p>下载完成后安装 Apache、Nginx 或其它 http 服务，将下载好的文件用 http 发布出来。</p><p>注意链接地址(按我上述设置的话) <code>http://your.address/ubuntu/</code><br>对应目录 <code>/var/spool/apt-mirror/mirror/mirrors.aliyun.com/ubuntu/</code></p><h2 id="问题处理"><a href="#问题处理" class="headerlink" title="问题处理"></a>问题处理</h2><h3 id="cnf-Commands-amd64-404-Not-Found"><a href="#cnf-Commands-amd64-404-Not-Found" class="headerlink" title="cnf/Commands-amd64  404  Not Found"></a>cnf/Commands-amd64  404  Not Found</h3><p><strong>原因：</strong>apt-mirror 版本太老</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l  /usr/bin/apt-mirror</span><br><span class="line">-rwxr-xr-x 1 root root 32351 mai 29  2017 /usr/bin/apt-mirror</span><br></pre></td></tr></table></figure><p><strong>解决：</strong>把 <code>/usr/bin/apt-mirror</code> 用 <code>https://github.com/Stifler6996/apt-mirror</code> 的替换。</p><h3 id="i386-Packages-404-Not-Found"><a href="#i386-Packages-404-Not-Found" class="headerlink" title="i386 Packages 404  Not Found"></a>i386 Packages 404  Not Found</h3><p><strong>原因：</strong><code>mirror.list</code> 默认设置只下载与本机相同架构的内容 <code>set defaultarch  &lt;running host architecture&gt;</code></p><p><strong>解决：</strong>在用此 apt 源的机器上设置 <code>sources.list</code> 时，在 <code>deb</code> 和 <code>http</code> 中间加 <code>[arch=amd64]</code></p><p>问题：如何让 apt-mirror 同时下载 64 和 32 位的内容？</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;p&gt;Ubuntu20.04 服务器在公司内网，不能连接 Internet，需要在内网搭建 apt 源方便服务器管理。&lt;/p&gt;
&lt;h2 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlink&quot; title=&quot;环境&quot;&gt;&lt;/a&gt;环境&lt;/h2&gt;&lt;p&gt;用来搭 apt 源的机器是 Win10，只能通过特定的 http 代理才能连接 Internet。&lt;/p&gt;
&lt;h2 id=&quot;步骤&quot;&gt;&lt;a href=&quot;#步骤&quot; class=&quot;headerlink&quot; title=&quot;步骤&quot;&gt;&lt;/a&gt;步骤&lt;/h2&gt;&lt;p&gt;在 Win10 内新建 Ubuntu 虚拟机，设置好 Ubuntu 里 apt 的走公司的 http 代理。&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="Linux" scheme="http://aword.net/tags/Linux/"/>
    
    <category term="apt" scheme="http://aword.net/tags/apt/"/>
    
  </entry>
  
  <entry>
    <title>my 2020</title>
    <link href="http://aword.net/my-2020/"/>
    <id>http://aword.net/my-2020/</id>
    <published>2021-01-02T18:28:46.000Z</published>
    <updated>2021-12-30T15:36:17.274Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="文字" scheme="http://aword.net/categories/%E6%96%87%E5%AD%97/"/>
    
    
    <category term="随笔" scheme="http://aword.net/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Laravel 通过代理发送邮件</title>
    <link href="http://aword.net/laravel-send-mail-via-proxy/"/>
    <id>http://aword.net/laravel-send-mail-via-proxy/</id>
    <published>2020-07-26T14:17:00.000Z</published>
    <updated>2021-12-30T15:36:17.275Z</updated>
    
    <content type="html"><![CDATA[<h2 id="遇到问题："><a href="#遇到问题：" class="headerlink" title="遇到问题："></a>遇到问题：</h2><p>Laravel (版本 5.5) 部署在内网，服务器 (win10-xmapp-php7.2) 只能通过特定的 http 代理访问外网。</p><p>如何让 Laravel 通过代理连接 mailgun 从而发送邮件？</p><span id="more"></span><h2 id="解决过程："><a href="#解决过程：" class="headerlink" title="解决过程："></a>解决过程：</h2><p>开始找了两个论坛提问，都没有得到有效的答案。后来决定深入学习一下 Laravel 发送邮件这方面的东西，结果碰巧一下就找到解决方案了。</p><blockquote><p><strong>感谢《说一说 Laravel 邮件发送流程》</strong></p></blockquote><blockquote><p><strong>作者 coding01</strong></p></blockquote><blockquote><p><strong>链接 <a href="https://juejin.im/post/5b82715de51d4538d63b748e">https://juejin.im/post/5b82715de51d4538d63b748e</a></strong></p></blockquote><p>在这篇文章里找到配置 mailgun 的代码位置，是在 <code>TransportManager </code> 类的 <code>createMailgunDriver()</code> 方法中</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create an instance of the Mailgun Swift Transport driver.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> \Illuminate\Mail\Transport\MailgunTransport</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">createMailgunDriver</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$config</span> = <span class="keyword">$this</span>-&gt;app[<span class="string">&#x27;config&#x27;</span>]-&gt;get(<span class="string">&#x27;services.mailgun&#x27;</span>, []);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MailgunTransport(</span><br><span class="line">        <span class="keyword">$this</span>-&gt;guzzle(<span class="variable">$config</span>),</span><br><span class="line">        <span class="variable">$config</span>[<span class="string">&#x27;secret&#x27;</span>], <span class="variable">$config</span>[<span class="string">&#x27;domain&#x27;</span>]</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中有个 <code>$this-&gt;guzzle($config)</code>，感觉有门，肯定是 guzzle 相关的东西，而且还传入了个<code>$config</code>。</p><p>继续找 <code>guzzle()</code> 方法，代码如下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Get a fresh Guzzle HTTP client instance.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  array  $config</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> \GuzzleHttp\Client</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">guzzle</span>(<span class="params"><span class="variable">$config</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> HttpClient(Arr::add(</span><br><span class="line">        <span class="variable">$config</span>[<span class="string">&#x27;guzzle&#x27;</span>] ?? [], <span class="string">&#x27;connect_timeout&#x27;</span>, <span class="number">60</span></span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再继续找<code>HttpClient</code>，代码如下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> <span class="keyword">implements</span> <span class="title">ClientInterface</span>, \<span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Client</span>\<span class="title">ClientInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">ClientTrait</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> array Default request options</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$config</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Clients accept an array of constructor parameters.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Here&#x27;s an example of creating a client using a base_uri and an array of</span></span><br><span class="line"><span class="comment">     * default request options to apply to each request:</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *     $client = new Client([</span></span><br><span class="line"><span class="comment">     *         &#x27;base_uri&#x27;        =&gt; &#x27;http://www.foo.com/1.0/&#x27;,</span></span><br><span class="line"><span class="comment">     *         &#x27;timeout&#x27;         =&gt; 0,</span></span><br><span class="line"><span class="comment">     *         &#x27;allow_redirects&#x27; =&gt; false,</span></span><br><span class="line"><span class="comment">     *         &#x27;proxy&#x27;           =&gt; &#x27;192.168.16.1:10&#x27;</span></span><br><span class="line"><span class="comment">     *     ]);</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">    ...</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>找到啦！</strong></p><p><strong>在 <code>new HttpClient()</code> 的时候可以传入 <code>$config[&#39;guzzle&#39;]</code> 设置 proxy。</strong></p><p><strong>而这个 <code>$config</code> 就在前面的 <code>createMailgunDriver()</code> 方法里，是 <code>$config = $this-&gt;app[&#39;config&#39;]-&gt;get(&#39;services.mailgun&#39;, []);</code>。</strong></p><h2 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h2><p>在 <code>config/services.php</code> 文件中给 <code>mailgun</code> 增加 <code>guzzle</code> 的 <code>proxy</code> 配置，如下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;mailgun&#x27;</span> =&gt; [</span><br><span class="line">    <span class="string">&#x27;domain&#x27;</span> =&gt; env(<span class="string">&#x27;MAILGUN_DOMAIN&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;secret&#x27;</span> =&gt; env(<span class="string">&#x27;MAILGUN_SECRET&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;guzzle&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;proxy&#x27;</span> =&gt; env(<span class="string">&#x27;MAILGUN_PROXY&#x27;</span>),</span><br><span class="line">    ],</span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>然后在 <code>.env</code> 文件中设置好 <code>MAILGUN_PROXY</code> 就行了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MAILGUN_PROXY=address:port</span><br></pre></td></tr></table></figure><p>ps. 如果需要的话，别忘了运行 <code>php artisan config:cache</code></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;遇到问题：&quot;&gt;&lt;a href=&quot;#遇到问题：&quot; class=&quot;headerlink&quot; title=&quot;遇到问题：&quot;&gt;&lt;/a&gt;遇到问题：&lt;/h2&gt;&lt;p&gt;Laravel (版本 5.5) 部署在内网，服务器 (win10-xmapp-php7.2) 只能通过特定的 http 代理访问外网。&lt;/p&gt;
&lt;p&gt;如何让 Laravel 通过代理连接 mailgun 从而发送邮件？&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="笔记" scheme="http://aword.net/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="教程" scheme="http://aword.net/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="Laravel" scheme="http://aword.net/tags/Laravel/"/>
    
  </entry>
  
  <entry>
    <title>docker容器内设置开机启动程序</title>
    <link href="http://aword.net/run-something-when-start-up-in-docker-container/"/>
    <id>http://aword.net/run-something-when-start-up-in-docker-container/</id>
    <published>2020-06-13T11:04:56.000Z</published>
    <updated>2021-12-30T15:36:17.274Z</updated>
    
    <content type="html"><![CDATA[<p>在 docker 里用 PHP + Apache 的环境做 web 服务器，想在容器启动时自动运行一个其它的程序（已手动安装），从网上搜索，尝试了好久，终于找到了可以接受的方法，在此记录。</p><p>镜像用的 php:7.2-apache，里面操作系统是 Debian。开始搜索的方向一直是如何给 Debian 设置开机启动，方向偏了。</p><p>Debian 旧版本：在 <code>/etc/rc.local</code> 文件中 <code>exit 0</code> 之前的位置添加自己需要的命令。</p><p>Debian 新版本：在 <code>/etc/init.d/</code> 下新建符合格式要求的脚本文件，然后用 <code>update-rc.d</code> 命令设置脚本运行的优先级。</p><p>这两种方法我都遇到了各种问题。</p><p>第一种方法需要先添加 rc.local 服务，这步没问题，但是之后需要用 systemctl 启用并启动这个服务。在容器中用 systemctl 的话需要在容器启动时添加额外的参数，因为我用的 docker composer，感觉很麻烦，放弃了。</p><p>第二种方法按搜到的各种步骤做完之后，自定义的脚本没有被添加到各个 <code>/etc/rcX.d/</code> 目录下，可能因为没使用 systemctl 命令，也可能因为这个容器修改了操作系统的配置，进行了限制（修改 <code>/usr/sbin/policy-rc.d</code> 的返回值不管用）。后来没再细究。</p><p>之后又尝试在 <code>docker-compose.yml</code> 中用 <code>CMD</code> 命令覆盖容器默认的启动命令，可能是命令写的不对，导致容器启动不了了。</p><p>这时，想到了现在我用的方法。</p><p><strong>把自定义的启动命令写到容器自带的启动文件里。</strong> php:7.2-apache 这个镜像是 <code>/usr/local/bin/docker-php-entrypoint</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在 docker 里用 PHP + Apache 的环境做 web 服务器，想在容器启动时自动运行一个其它的程序（已手动安装），从网上搜索，尝试了好久，终于找到了可以接受的方法，在此记录。&lt;/p&gt;
&lt;p&gt;镜像用的 php:7.2-apache，里面操作系统是 Debian。</summary>
      
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="笔记" scheme="http://aword.net/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="教程" scheme="http://aword.net/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="docker" scheme="http://aword.net/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>用360安全卫士替换360天擎</title>
    <link href="http://aword.net/replace-360-skydrive-with-360-security-guard/"/>
    <id>http://aword.net/replace-360-skydrive-with-360-security-guard/</id>
    <published>2020-03-21T21:17:43.000Z</published>
    <updated>2021-12-30T15:36:17.274Z</updated>
    
    <content type="html"><![CDATA[<p>win10系统装上360天擎之后卡的一比（不确定是否为个例），而且这玩意没法正常的退出或卸载。于是乎找了宛转的方法把<a href="https://aword.net/uninstall-360-tian-qing/" target="_blank">360天擎卸载</a>了。</p><p>如此一直正常用了挺长时间，最近突然出问题了。网络策略会检测电脑上是否有<strong>360的主动防御</strong>，没有的话就断网。</p><p>怎么办？</p><p>其实答案是呼之欲出的。给电脑一个<strong>容易掌控的360主动防御</strong>。</p><p>安装360安全卫士。关掉开机启动，并按照自己的意愿进行其它设置，最后退出360安全卫士。主动防御进程会一直在后台运行的。</p><hr><p>其实还有其它更彻底的方法，例如安装虚拟机，让虚拟机满足网络策略并接受检测，物理主机通过虚拟机来连网。有兴趣的朋友可以研究一下。</p><p><strong>鉴于这种方法过于生猛，建议慎用。</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;win10系统装上360天擎之后卡的一比（不确定是否为个例），而且这玩意没法正常的退出或卸载。于是乎找了宛转的方法把&lt;a href=&quot;https://aword.net/uninstall-360-tian-qing/&quot; target=&quot;_blank&quot;&gt;360天擎卸载&lt;/a</summary>
      
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="教程" scheme="http://aword.net/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="技术" scheme="http://aword.net/tags/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="Windows" scheme="http://aword.net/tags/Windows/"/>
    
    <category term="360" scheme="http://aword.net/tags/360/"/>
    
  </entry>
  
  <entry>
    <title>安装 DockerToolbox 遇到 VT-X/AMD-v not enabled</title>
    <link href="http://aword.net/VT-X-or-AMD-v-not-enabled-error-when-install-DockerToolbox/"/>
    <id>http://aword.net/VT-X-or-AMD-v-not-enabled-error-when-install-DockerToolbox/</id>
    <published>2020-02-15T00:51:35.000Z</published>
    <updated>2021-12-30T15:36:17.274Z</updated>
    
    <content type="html"><![CDATA[<p>网上搜了一下，遇到这个问题的貌似都是用的 AMD 的 CPU</p><p>若确实已经启用 CPU 虚拟化，仍有此问题，<strong>解决方案</strong>：</p><p><strong>添加如下参数 （不检查虚拟化是否已启用）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--virtualbox-no-vtx-check</span><br></pre></td></tr></table></figure><p><strong>①手动执行简单命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-machine create default --virtualbox-no-vtx-check</span><br></pre></td></tr></table></figure><p>或者</p><p><strong>②修改 DockerToolbox 自带的启动脚本</strong></p><p>修改 start.sh （在 DockerToolbox 的安装目录下）</p><p>找到这行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;<span class="variable">$&#123;DOCKER_MACHINE&#125;</span>&quot;</span> create -d virtualbox <span class="variable">$PROXY_ENV</span> <span class="string">&quot;<span class="variable">$&#123;VM&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><p>改为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;<span class="variable">$&#123;DOCKER_MACHINE&#125;</span>&quot;</span> create -d virtualbox <span class="variable">$PROXY_ENV</span> --virtualbox-no-vtx-check <span class="string">&quot;<span class="variable">$&#123;VM&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;网上搜了一下，遇到这个问题的貌似都是用的 AMD 的 CPU&lt;/p&gt;
&lt;p&gt;若确实已经启用 CPU 虚拟化，仍有此问题，&lt;strong&gt;解决方案&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;添加如下参数 （不检查虚拟化是否已启用）&lt;/strong&gt;&lt;/p&gt;
&lt;figu</summary>
      
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="教程" scheme="http://aword.net/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="docker" scheme="http://aword.net/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>方向</title>
    <link href="http://aword.net/direction/"/>
    <id>http://aword.net/direction/</id>
    <published>2020-01-16T23:19:40.000Z</published>
    <updated>2021-12-30T15:36:17.274Z</updated>
    
    <content type="html"><![CDATA[<p>于此世荒诞，吾将何如</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;于此世荒诞，吾将何如&lt;/p&gt;
</summary>
      
    
    
    
    <category term="文字" scheme="http://aword.net/categories/%E6%96%87%E5%AD%97/"/>
    
    
    <category term="随笔" scheme="http://aword.net/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>关闭朋友圈广告</title>
    <link href="http://aword.net/stop-wechat-ad/"/>
    <id>http://aword.net/stop-wechat-ad/</id>
    <published>2019-10-19T22:17:50.000Z</published>
    <updated>2022-03-31T14:34:22.149Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/BubbleNebula_ZH-CN2787112807_1920x1080.jpg" alt="Bubble Nebula"></p><p>朋友圈里不只朋友的广告，还有腾讯的广告。朋友的可以设置为不看，腾讯的可以设置为不看吗？</p><p>可以。</p><span id="more"></span><p><strong>方法如下：</strong></p><ol><li>打开 <strong>腾讯隐私保护平台</strong><br>地址 <a href="https://privacy.qq.com/">https://privacy.qq.com</a></li><li>找到 <strong>广告</strong> 部分，点击 <strong>关于广告</strong><br>地址 <a href="https://privacy.qq.com/advertisement.htm">https://privacy.qq.com/advertisement.htm</a></li><li>找新页面第二部分，点击 “您可以 <strong>管理</strong> 腾讯为您展示的广告”<br>地址 <a href="https://privacy.qq.com/ads/optout.html">https://privacy.qq.com/ads/optout.html</a></li><li>新页面右上角 <strong>微信登陆</strong><br>扫码登陆（实测：本机截图然后扫相册里的图片不行，需要用摄像头扫的才行）</li><li>登陆之后有 <strong>个性化服务设置</strong><br>把里面四个选项都关掉<br><img src="http://cdn.aword.net/images/privacy.qq.com_ads_optout.png" alt="privacy.qq.com"></li></ol><p><strong>实测</strong> 有效。<br>也可以用QQ登陆，把QQ的部分广告关掉。</p><p>还有一句提示<br>   <code>请注意，关闭上述服务意味着我们的广告系统不会再利用该类信息为您展示广告，但不代表您将减少看到的广告或不再看到广告。在关闭该项服务期间，您仍可能收到普遍投放的广告。</code></p><blockquote><p>参考来源：<br><a href="https://laod.cn/black-technology/weixin-guanggao.html">https://laod.cn/black-technology/weixin-guanggao.html</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/BubbleNebula_ZH-CN2787112807_1920x1080.jpg&quot; alt=&quot;Bubble Nebula&quot;&gt;&lt;/p&gt;
&lt;p&gt;朋友圈里不只朋友的广告，还有腾讯的广告。朋友的可以设置为不看，腾讯的可以设置为不看吗？&lt;/p&gt;
&lt;p&gt;可以。&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="教程" scheme="http://aword.net/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="广告" scheme="http://aword.net/tags/%E5%B9%BF%E5%91%8A/"/>
    
    <category term="微信" scheme="http://aword.net/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>Android Studio 升级到3.4后报 instant run 相关错误</title>
    <link href="http://aword.net/error-in-android-studio-about-instant-run/"/>
    <id>http://aword.net/error-in-android-studio-about-instant-run/</id>
    <published>2019-06-23T02:00:55.000Z</published>
    <updated>2021-12-30T15:36:17.275Z</updated>
    
    <content type="html"><![CDATA[<p>Android Studio 升级到3.4之后，运行项目报错，如下：</p><p><code>app\build\intermediates\instant_run_split_apk_resources\debug\instantRunSplitApkResourcesDebug\out\slice_1\resources_ap</code></p><p>在设置里关闭 instant run ，能正常跑。</p><p>再次打开 instant run 之后，还会报上面同样的错误。</p><hr><p><strong>解决方案：</strong></p><p><strong>把 gradle 升级到 5.4</strong> （我的升级之前是5.1.1）</p><hr><p>参考来源：<a href="https://fullstack.im/questions/55802212/error-related-to-resources-ap-after-upgrading-to-android-studio-3-4">https://fullstack.im/questions/55802212/error-related-to-resources-ap-after-upgrading-to-android-studio-3-4</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Android Studio 升级到3.4之后，运行项目报错，如下：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;app\build\intermediates\instant_run_split_apk_resources\debug\instantRunSplitApkResources</summary>
      
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="Android Studio" scheme="http://aword.net/tags/Android-Studio/"/>
    
    <category term="Andriod" scheme="http://aword.net/tags/Andriod/"/>
    
  </entry>
  
  <entry>
    <title>PHP-笔记</title>
    <link href="http://aword.net/note-of-php/"/>
    <id>http://aword.net/note-of-php/</id>
    <published>2019-06-04T00:20:17.000Z</published>
    <updated>2021-12-30T15:36:17.275Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/BassRock_ZH-CN4418828352_1920x1080.jpg" alt="苏格兰福斯湾的巴斯岩"></p><p>在这里记录一些关于 PHP 的笔记。</p><span id="more"></span><h1 id="laravel"><a href="#laravel" class="headerlink" title="laravel"></a>laravel</h1><h2 id="laravel5-5编译less"><a href="#laravel5-5编译less" class="headerlink" title="laravel5.5编译less"></a>laravel5.5编译less</h2><p><strong>1.需要手动安装两个包</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install less --save-dev</span><br><span class="line">npm install less-loader --save-dev</span><br></pre></td></tr></table></figure><p><strong>2.因为less3.x暂不支持 javascriptEnabled ，需要修改 less-loader/dist/index.js</strong></p><p><img src="https://cdn.aword.net/images/less-loader.png" alt="less-loader.png"></p><p>在 <code>var options</code> 后面加上 <code>options.javascriptEnabled = true</code> </p><p><strong>3.如果想自定义 webpackConfig 可以使用 mix.webpackConfig()</strong> </p><p>参数的结构可以参照 <code>node_modules/laravel-mix/src/builder/webpack-default.js</code> </p><p>Ant Design of Vue 定制主题示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mix.webpackConfig(&#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            use: [&#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&#x27;less-loader&#x27;</span>, </span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                    <span class="attr">modifyVars</span>: &#123;</span><br><span class="line">                        <span class="string">&#x27;primary-color&#x27;</span>: <span class="string">&#x27;#1DA57A&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;link-color&#x27;</span>: <span class="string">&#x27;#1DA57A&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;border-radius-base&#x27;</span>: <span class="string">&#x27;2px&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">javascriptEnabled</span>: <span class="literal">true</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;],</span><br><span class="line">        &#125;],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>（此示例中 javascriptEnabled: true 与上面第2条添加 options.javascriptEnabled = true 的作用相同，可二选其一）</strong></p><p>最后在 <code>webpack.mix.js</code> 文件中使用 <code>mix.less()</code> 即可</p><h2 id="多个项目导致-env-文件冲突"><a href="#多个项目导致-env-文件冲突" class="headerlink" title="多个项目导致 .env 文件冲突"></a>多个项目导致 .env 文件冲突</h2><blockquote><p>这个问题多半发生在 Apache上，因为加载.env文件的时候用了 getenv() 和 setenv() 。</p><p>这两个函数不是线程安全的，它会将.env文件里面的值设置在进程级别的环境中（process-wide variable）</p><p>Apache 使用线程处理请求，当一个进程同时有几个线程的时候，就比较容易发生 ‘串值’ 的情况</p><p><a href="https://blog.csdn.net/qq_29785317/article/details/81068733">https://blog.csdn.net/qq_29785317/article/details/81068733</a></p></blockquote><p>解决方案：</p><p>执行 <code>php artisan config:cache</code></p><hr><h1 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h1><h2 id="匹配-反斜杠"><a href="#匹配-反斜杠" class="headerlink" title="匹配 反斜杠 \"></a>匹配 反斜杠 \</h2><p>在 PHP 中用正则匹配 <code>\</code> 需要用四个反斜杠，即 <code>&#39;/\\\\/&#39;</code>，用两个的话会在 PHP 解析字符串时被解析为一个。</p><p>PS. 貌似，用三个也可以。</p><hr><h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><h2 id="json-encode-造成浮点数精度问题"><a href="#json-encode-造成浮点数精度问题" class="headerlink" title="json_encode 造成浮点数精度问题"></a>json_encode 造成浮点数精度问题</h2><blockquote><p><a href="https://www.php.net/manual/zh/function.json-encode.php">https://www.php.net/manual/zh/function.json-encode.php</a></p><p><a href="https://www.php.net/manual/zh/ini.core.php#ini.serialize-precision">https://www.php.net/manual/zh/ini.core.php#ini.serialize-precision</a></p><p><a href="https://wiki.php.net/rfc/precise_float_value">https://wiki.php.net/rfc/precise_float_value</a></p><p><a href="https://segmentfault.com/a/1190000008737065">https://segmentfault.com/a/1190000008737065</a></p><p><a href="http://landcareweb.com/questions/11885/php7-1-json-encode-floatwen-ti">http://landcareweb.com/questions/11885/php7-1-json-encode-floatwen-ti</a></p><p><a href="https://blog.csdn.net/qq_42451060/article/details/80993664">https://blog.csdn.net/qq_42451060/article/details/80993664</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/BassRock_ZH-CN4418828352_1920x1080.jpg&quot; alt=&quot;苏格兰福斯湾的巴斯岩&quot;&gt;&lt;/p&gt;
&lt;p&gt;在这里记录一些关于 PHP 的笔记。&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="笔记" scheme="http://aword.net/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="PHP" scheme="http://aword.net/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>卸载360天擎</title>
    <link href="http://aword.net/uninstall-360-tian-qing/"/>
    <id>http://aword.net/uninstall-360-tian-qing/</id>
    <published>2019-05-11T23:06:59.000Z</published>
    <updated>2021-12-30T15:36:17.275Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/ChannelIslandFox_ZH-CN5568101953_1920x1080.jpg" alt="ChannelIslandFox"></p><p>许多企业（可能主要是国企）在内部电脑上强制安装360天擎。</p><p>企业固然是想保证内部机器和网络的安全，但是360这货……大家懂的。</p><p>想退出？请输入密码。</p><p>想卸载？请输入密码。</p><p>但是我没密码……</p><span id="more"></span><p><strong>1.在360的安装路径下删除所有文件名中包含 ent 的文件和文件夹。</strong></p><p>可以直接使用360自带的文件粉碎机，也可以找其它工具软件，或者进 pe 删。</p><p>默认路径安装的话，这些文件在C:\Program Files\360\360Safe，或C:\Program Files (x86)\360\360Safe里面。</p><p><img src="http://cdn.aword.net/images/360Ent_882x446_2019-10-13.png" alt="删除带ent的文件和文件夹"></p><p>见上图，共6个文件和1个文件夹。</p><p><strong>2.到系统的控制面板正常卸载即可。</strong></p><hr><blockquote><p>参考来源：</p><p><a href="https://www.daozhao.com/3702.html">https://www.daozhao.com/3702.html</a></p><p><a href="http://bbs.360safe.com/thread-883017-2-tumult">http://bbs.360safe.com/thread-883017-2-tumult</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/ChannelIslandFox_ZH-CN5568101953_1920x1080.jpg&quot; alt=&quot;ChannelIslandFox&quot;&gt;&lt;/p&gt;
&lt;p&gt;许多企业（可能主要是国企）在内部电脑上强制安装360天擎。&lt;/p&gt;
&lt;p&gt;企业固然是想保证内部机器和网络的安全，但是360这货……大家懂的。&lt;/p&gt;
&lt;p&gt;想退出？请输入密码。&lt;/p&gt;
&lt;p&gt;想卸载？请输入密码。&lt;/p&gt;
&lt;p&gt;但是我没密码……&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="教程" scheme="http://aword.net/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="技术" scheme="http://aword.net/tags/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="Windows" scheme="http://aword.net/tags/Windows/"/>
    
    <category term="360" scheme="http://aword.net/tags/360/"/>
    
  </entry>
  
  <entry>
    <title>我的二零一八</title>
    <link href="http://aword.net/my-2018/"/>
    <id>http://aword.net/my-2018/</id>
    <published>2019-01-12T22:17:23.000Z</published>
    <updated>2021-12-30T15:36:17.275Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/LadyBugFrost_ZH-CN0796268333_1920x1080.jpg" alt="一只冬眠的瓢虫"></p><p>每到岁末年初，总是希望整理出一篇长长的年终总结。回望这二零一八，貌似清淡如水，波澜不惊。</p><span id="more"></span><h2 id="女儿"><a href="#女儿" class="headerlink" title="女儿"></a>女儿</h2><p>乖巧可爱，看着她一天天长大，甚是欢欣。</p><h2 id="献血"><a href="#献血" class="headerlink" title="献血"></a>献血</h2><p>又献了一次血，貌似状态不如去年。照现在这状态下去，怕明年是够呛了。</p><h2 id="TheData"><a href="#TheData" class="headerlink" title="TheData"></a>TheData</h2><p>各种因素影响，进展非常缓慢。其实最主要的原因还是缺少明确的愿景。</p><h2 id="淘客"><a href="#淘客" class="headerlink" title="淘客"></a>淘客</h2><p>一时兴起想搞一下，是自己幻想的画面太美，实际发现太难。</p><h2 id="自身"><a href="#自身" class="headerlink" title="自身"></a>自身</h2><p>状态持续低迷，原因比较多，不知新的一年能有多少起色。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/LadyBugFrost_ZH-CN0796268333_1920x1080.jpg&quot; alt=&quot;一只冬眠的瓢虫&quot;&gt;&lt;/p&gt;
&lt;p&gt;每到岁末年初，总是希望整理出一篇长长的年终总结。回望这二零一八，貌似清淡如水，波澜不惊。&lt;/p&gt;</summary>
    
    
    
    <category term="文字" scheme="http://aword.net/categories/%E6%96%87%E5%AD%97/"/>
    
    
    <category term="随笔" scheme="http://aword.net/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>不番羽土啬同步Chrome书签</title>
    <link href="http://aword.net/sync-chrome-bookmarks-in-gfw/"/>
    <id>http://aword.net/sync-chrome-bookmarks-in-gfw/</id>
    <published>2018-07-06T23:20:48.000Z</published>
    <updated>2021-12-30T15:36:17.274Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/MozambiqueSandbar_EN-AU11463522567_1920x1080.jpg" alt="陆海有界"></p><p>自己目前在用的墙内同步 Chrome 书签的方案，略显啰嗦，但用了一段时间，还算稳定，贴出来，希望能帮到有缘人。</p><span id="more"></span><p>遥想当年，谷歌还在国内的时候，真好。后来随便弄个 IP 弄个 host 就能用 Google 的日子也不错。现在嘛，我就想知道政府每年花在 伟大防火长城 上的钱有多少……</p><p><strong>需求：</strong>Windows 系统、只同步书签即可、有至少一台电脑不能/不想/不方便番羽土啬。</p><p><strong>工具：</strong>坚果云、FreeFileSync。</p><p>本来想自己搞一个 Chrome 拓展，服务端找个免费的云存储，做成的话还可以稍微推广一下。后来考虑投入产出比，放弃了。有心思用这东西的人，应该都有办法连到 Google 的服务器同步吧。</p><p>坚果云可以选择性同步文件夹（v3.4.4及以前），但是不能对同一文件夹下不同文件进行选择性同步。</p><p>FreeFileSync 可以近“实时”的同步本地目录，同步规则几乎可以“任意”设置。</p><p><strong>方案：</strong>用 坚果云 在不同电脑间建立同步文件夹，每台电脑都用 FreeFileSync 把 Chrome 的书签文件（未登陆的话在安装目录下 Data\Profile\Default 里面，文件名Bookmarks）同步到 坚果云 的同步文件夹内。</p><p>大功告成。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/MozambiqueSandbar_EN-AU11463522567_1920x1080.jpg&quot; alt=&quot;陆海有界&quot;&gt;&lt;/p&gt;
&lt;p&gt;自己目前在用的墙内同步 Chrome 书签的方案，略显啰嗦，但用了一段时间，还算稳定，贴出来，希望能帮到有缘人。&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="网络" scheme="http://aword.net/tags/%E7%BD%91%E7%BB%9C/"/>
    
    <category term="gfw" scheme="http://aword.net/tags/gfw/"/>
    
    <category term="chrome" scheme="http://aword.net/tags/chrome/"/>
    
    <category term="坚果云" scheme="http://aword.net/tags/%E5%9D%9A%E6%9E%9C%E4%BA%91/"/>
    
    <category term="freefilesync" scheme="http://aword.net/tags/freefilesync/"/>
    
  </entry>
  
  <entry>
    <title>追寻</title>
    <link href="http://aword.net/zhui-xun/"/>
    <id>http://aword.net/zhui-xun/</id>
    <published>2018-06-15T22:28:21.000Z</published>
    <updated>2021-12-30T15:36:17.273Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/TinyLadybird_ZH-CN14023054484_1920x1080.jpg" alt="追寻"></p><p>为何入党，想想最开始的时候其实没有一个十分明确的目的。</p><span id="more"></span><p>对党的认识也比较少，基本局限在学校里学的“没有共产党就没有新中国”，思想政治课上的马列主义，毛泽东思想。当时申请入党的动机包含着一些“随大流”的思想，知道是件好事，是个值得光荣的事。共产党是工人阶级先锋队，是中国的执政党，是全国一大批先进的、优秀的人所组成的一个大集体。现在仔细想想，当时入党的动机就是对这个先锋集体的追随，对这个引领祖国不断前进的力量的敬仰。 </p><p>随着时间久了，阅历逐渐积累，对这个事也逐步有更深刻的认识。入党是一种向上的追求，入党也是一种实现个人人生价值的途径和平台。在历史的长河中，个人的存在是渺小的；在广大的社会里，个人的力量是单薄的。党组织就是要把一个个渺小又单薄，但是内心坚定着理想和信念，有志为社会、为祖国甚至为全人类做出贡献的这些个体聚拢到一起，连成片、织成网，形成一股无坚不摧的力量。个体，投身其中，便是加入了先锋的队伍，与志同道合的伙伴一起，站在更高的平台上发光发热，照亮更远更广的范围。</p><p><img src="http://img1.gtimg.com/cul/pics/hv1/148/24/2275/147938143.jpg" alt="Workers of all lands unite"></p><p>党员，必须要有坚定的共产主义理想，不一定非得按课本上一字不差的教条，但内心深处一定要有一股为无产阶级事业奋斗的正直和决绝；有一种为人民服务、解放劳苦大众的奉献和博爱；有一份努力把当下社会变的更加平等、和谐、美好的责任感和使命感。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/TinyLadybird_ZH-CN14023054484_1920x1080.jpg&quot; alt=&quot;追寻&quot;&gt;&lt;/p&gt;
&lt;p&gt;为何入党，想想最开始的时候其实没有一个十分明确的目的。&lt;/p&gt;</summary>
    
    
    
    <category term="文字" scheme="http://aword.net/categories/%E6%96%87%E5%AD%97/"/>
    
    
    <category term="随笔" scheme="http://aword.net/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>观《厉害了，我的国》</title>
    <link href="http://aword.net/guan-li-hai-le-wo-de-guo/"/>
    <id>http://aword.net/guan-li-hai-le-wo-de-guo/</id>
    <published>2018-03-13T21:08:03.000Z</published>
    <updated>2021-12-30T15:36:17.273Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/JohnstonCanyon_EN-AU13753864901_1920x1080.jpg" alt="JohnstonCanyon"></p><p>今天单位组织，集体观看《厉害了，我的国》，要求着工服。</p><p>影院墙上的宣传牌，道：“欢迎各企事业单位包场观看《厉害了，我的国》，联系电话#######”。</p><span id="more"></span><p>1、凡事分阴阳，首先要知道这个是“好事”的集合，不表其他。</p><p>2、把近来祖国的各种先进拿出来，伴着朗诵，和着背景乐，有燃点，可以看。</p><p>3、习近平主席的镜头贯穿始终。</p><p>4、该影片在豆瓣无法评分，其他媒体一致好评，很难看到有网友给出差评。</p><p>5、我是中国人，我爱我的祖国，愿它越来越好。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/JohnstonCanyon_EN-AU13753864901_1920x1080.jpg&quot; alt=&quot;JohnstonCanyon&quot;&gt;&lt;/p&gt;
&lt;p&gt;今天单位组织，集体观看《厉害了，我的国》，要求着工服。&lt;/p&gt;
&lt;p&gt;影院墙上的宣传牌，道：“欢迎各企事业单位包场观看《厉害了，我的国》，联系电话#######”。&lt;/p&gt;</summary>
    
    
    
    <category term="文字" scheme="http://aword.net/categories/%E6%96%87%E5%AD%97/"/>
    
    
    <category term="随笔" scheme="http://aword.net/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>辞旧迎新季</title>
    <link href="http://aword.net/ci-jiu-ying-xin-ji/"/>
    <id>http://aword.net/ci-jiu-ying-xin-ji/</id>
    <published>2017-12-28T00:00:00.000Z</published>
    <updated>2021-12-30T15:36:17.273Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/NordketteNYE_EN-US12870487032_1920x1080.jpg" alt="暗夜烟火"></p><p>又走完了一年。</p><p>每天上下班往返路上，只听引擎呼吸，世间寂静，有时酣眠四海，有时神游五洲，想了很多，也忘了很多。</p><p>一天，突然意识到自己为何如此珍视过往的记忆，只因我正一点点将它们忘记。</p><span id="more"></span><h2 id="博客搬家"><a href="#博客搬家" class="headerlink" title="博客搬家"></a>博客搬家</h2><p>本早已计划好，准备等正用的万网主机明年到期之后把博客程序改成 Hexo。奈何计划不如变化，九月底阿里云邮件通知屏蔽了我一篇文章的链接，顿时满满的厌恶感升腾而起，之前了解到的关于阿里的【恶】尽从脑海里跃起一条条在眼前打了个滚。</p><p>本地安装 Hexo 程序，装插件装主题，改设置调样式。从原主机扒文章数据，，手动恢复分类和标签数…手动恢复文章链接…好顿一折腾。一开始把博客放在了 GitHub Pages 上面，除了速度劣势其他一切都好。因为想恢复之前的 <a href="https://aword.net/bingbackground/">Bing Background</a>，又正好赶上不久前 <code>coding.net</code> 提供了免费动态页面服务，便把服务端的动作放在了 <code>coding.net</code>。于是乎，把博客也一起放过来了，速度快了不少，但多了首页硬性的广告链接，不过也还算厚道。</p><h2 id="TheData"><a href="#TheData" class="headerlink" title="TheData"></a>TheData</h2><p>这个东西几乎贯穿了我 2017 的一整年，也消耗了大多数的业余时间。从最开始突发奇想的练手项目，到现在内部的小规模应用，总算不枉一番心血。</p><p>有点遗憾的是框架的功能几乎没怎么用到，当然也因为学的少，也没学会。</p><h2 id="Work"><a href="#Work" class="headerlink" title="Work"></a>Work</h2><p>细细想来，这一年收获几何，长进几何，心中一凉，闭眼思索。</p><p>再往窗外眺去，对面小区里有一人在夜跑。</p><p>今年顺利评上了职称。</p><h2 id="家"><a href="#家" class="headerlink" title="家"></a>家</h2><p>回头想想前几年在西北时候满脑子的愿景，也无非当前的样子。一家人在一起，和睦；工作上算稳定，温饱；业余时够自由，充实。</p><h2 id="参加了个座谈"><a href="#参加了个座谈" class="headerlink" title="参加了个座谈"></a>参加了个座谈</h2><p>听了半天，有收获，有思考。</p><p>貌似，仅限于那一会。</p><h2 id="读书"><a href="#读书" class="headerlink" title="读书"></a>读书</h2><p>《看见》才读了一半。</p><h2 id="政治"><a href="#政治" class="headerlink" title="政治"></a>政治</h2><p>在这里只剩下莫谈国是。</p><p>千万要记得，彼岸别有一番风景。</p><p><img src="http://cdn.aword.net/images/WoolBaySeadragon_EN-AU12559454946_1920x1080.jpg" alt="WoolBaySeadragon"></p><h2 id="终了"><a href="#终了" class="headerlink" title="终了"></a>终了</h2><p>这世界像一座巨大无比的时钟，无数的齿轮相互咬合，圆转不息。人们被卡在一个一个齿缝里，慢不得，快不得，停不下，逃不脱。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/NordketteNYE_EN-US12870487032_1920x1080.jpg&quot; alt=&quot;暗夜烟火&quot;&gt;&lt;/p&gt;
&lt;p&gt;又走完了一年。&lt;/p&gt;
&lt;p&gt;每天上下班往返路上，只听引擎呼吸，世间寂静，有时酣眠四海，有时神游五洲，想了很多，也忘了很多。&lt;/p&gt;
&lt;p&gt;一天，突然意识到自己为何如此珍视过往的记忆，只因我正一点点将它们忘记。&lt;/p&gt;</summary>
    
    
    
    <category term="文字" scheme="http://aword.net/categories/%E6%96%87%E5%AD%97/"/>
    
    
    <category term="纪念" scheme="http://aword.net/tags/%E7%BA%AA%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Next修改记录</title>
    <link href="http://aword.net/hexo+next-modify-record/"/>
    <id>http://aword.net/hexo+next-modify-record/</id>
    <published>2017-12-16T07:15:19.000Z</published>
    <updated>2021-12-30T15:36:17.274Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/MountainDayNepal_ROW11115933291_1920x1080.jpg" alt="MountainDayNepal"></p><p>博客由 Typecho 换成了 Hexo，记录一下改动内容，以备下次重装……</p><span id="more"></span><p>程序版本：<br><strong>Hexo 3.4.3</strong><br><strong>NexT.Gemini 5.1.3</strong></p><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p><strong>hexo-deployer-git</strong><br><strong>hexo-generator-feed</strong><br><strong>hexo-generator-searchdb</strong><br><strong>hexo-generator-sitemap</strong> （将 <code>sitemap.xml</code> 拷贝到根目录 改名为 <code>sitemap_template.xml</code>）</p><h2 id="修正-sidebar-在-IE-不显示-margin-left-为负"><a href="#修正-sidebar-在-IE-不显示-margin-left-为负" class="headerlink" title="修正 sidebar 在 IE 不显示(margin-left 为负)"></a>修正 sidebar 在 IE 不显示(margin-left 为负)</h2><p>/themes/next/source/css/_schemes/Pisces/_sidebar.styl : line 4</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// margin-left: -50%;</span></span><br><span class="line"><span class="attribute">margin-left</span>: inherit;</span><br></pre></td></tr></table></figure><h2 id="去除侧边栏的错位"><a href="#去除侧边栏的错位" class="headerlink" title="去除侧边栏的错位"></a>去除侧边栏的错位</h2><p>/themes/next/source/js/src/utils.js : line 327</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $(&#x27;.site-overview, .post-toc&#x27;).css(&#x27;width&#x27;, &#x27;calc(100% + &#x27; + scrollbarWidth + &#x27;px)&#x27;);</span></span><br><span class="line">$(<span class="string">&#x27;.site-overview, .post-toc&#x27;</span>).css(<span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;100%&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="css-修改"><a href="#css-修改" class="headerlink" title="css 修改"></a>css 修改</h2><p>/themes/next/source/css/_custom/custom.styl : line 3</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 去除侧边栏导致错位的 margin</span></span><br><span class="line"><span class="selector-class">.site-overview</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 把 footer 的内容连成一行</span></span><br><span class="line"><span class="selector-class">.footer-custom</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 修正 IE 显示效果（因 IE 不支持 initial）</span></span><br><span class="line"><span class="selector-class">.main</span>, <span class="selector-class">.content-wrap</span>, <span class="selector-class">.posts-expand</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 修正 IE 显示效果（因 IE 不支持 initial）</span></span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: inherit;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 修正 IE 显示效果（因 IE 不支持 initial）</span></span><br><span class="line"><span class="selector-id">#comments</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">12px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 去除文章中的图片边框</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 缩小 margin-bottom</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3px</span> <span class="number">0</span> <span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="删除【某站正在使用畅言】"><a href="#删除【某站正在使用畅言】" class="headerlink" title="删除【某站正在使用畅言】"></a>删除【某站正在使用畅言】</h2><p>/themes/next/layout/_layout.swig : line 81</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> zzz=<span class="built_in">setInterval</span>(clear_section_service_w,<span class="number">200</span>);</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">clear_section_service_w</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span>($(<span class="string">&#x27;.section-service-w&#x27;</span>).length&gt;<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">&#x27;.section-service-w&#x27;</span>).html(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">clearInterval</span>(zzz);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">clearInterval</span>(zzz);&#125;,<span class="number">3000</span>);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/MountainDayNepal_ROW11115933291_1920x1080.jpg&quot; alt=&quot;MountainDayNepal&quot;&gt;&lt;/p&gt;
&lt;p&gt;博客由 Typecho 换成了 Hexo，记录一下改动内容，以备下次重装……&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="Hexo" scheme="http://aword.net/tags/Hexo/"/>
    
    <category term="NexT" scheme="http://aword.net/tags/NexT/"/>
    
  </entry>
  
  <entry>
    <title>国内形势大好，国外水深火热</title>
    <link href="http://aword.net/guo-nei-xing-shi-da-hao-guo-wai-shui-shen-huo-re/"/>
    <id>http://aword.net/guo-nei-xing-shi-da-hao-guo-wai-shui-shen-huo-re/</id>
    <published>2017-12-14T08:10:06.000Z</published>
    <updated>2021-12-30T15:36:17.272Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/SitanaPonticeriana_ZH-CN9845735476_1920x1080.jpg"></p><p><del>前几天</del>九月底，阿里云给我发了一封邮件，主题：<code>违规URL屏蔽访问处理通知</code>，通知我博客上一篇文章涉及【违法不良信息】，<code>违反了相关服务协议和《互联网信息服务管理办法》第十五条规定</code>，已作出屏蔽访问处理。</p><p>喜迎十九大。</p><span id="more"></span><p>那么这篇文章的内容是什么呢？不过是一份早就过时没法用的 host 列表。当年网上随便一搜就能找到大把可用的 host，上个 Google，刷个 Twitter 什么的都行，那会我的域名还有博客主机都在香港一个小公司 ；收到这个邮件通知的到时候，已经很难在搜索引擎上简便的找到能用的 host 了，此时我的域名和主机都在阿里……</p><h2 id="换主机迁域名"><a href="#换主机迁域名" class="headerlink" title="换主机迁域名"></a>换主机迁域名</h2><p>博客改成 hexo，放到 GitHub，域名从阿里迁出来，放到国外</p><h2 id="严审查甚防川"><a href="#严审查甚防川" class="headerlink" title="严审查甚防川"></a>严审查甚防川</h2><p>各种途径纷纷失效，用的正爽的 Chrome 同步失效， Google 失联</p><p>谓其违法，法自何来</p><p>政治，一门重要的学问，于此，教育困于马列毛邓，社会止于新闻联播</p><h2 id="为何喜为何哀"><a href="#为何喜为何哀" class="headerlink" title="为何喜为何哀"></a>为何喜为何哀</h2><p>本庄重严肃的事情，为何冠以喜字，喜从何来</p><p>长此以往</p><p>你选择等待，还是选择奋斗</p><h2 id="终了"><a href="#终了" class="headerlink" title="终了"></a>终了</h2><p>星星之火，可以燎原</p><p>莫谈国是</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/SitanaPonticeriana_ZH-CN9845735476_1920x1080.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;del&gt;前几天&lt;/del&gt;九月底，阿里云给我发了一封邮件，主题：&lt;code&gt;违规URL屏蔽访问处理通知&lt;/code&gt;，通知我博客上一篇文章涉及【违法不良信息】，&lt;code&gt;违反了相关服务协议和《互联网信息服务管理办法》第十五条规定&lt;/code&gt;，已作出屏蔽访问处理。&lt;/p&gt;
&lt;p&gt;喜迎十九大。&lt;/p&gt;</summary>
    
    
    
    <category term="文字" scheme="http://aword.net/categories/%E6%96%87%E5%AD%97/"/>
    
    
    <category term="网络" scheme="http://aword.net/tags/%E7%BD%91%E7%BB%9C/"/>
    
    <category term="自由" scheme="http://aword.net/tags/%E8%87%AA%E7%94%B1/"/>
    
  </entry>
  
  <entry>
    <title>Python日期和时间</title>
    <link href="http://aword.net/python-date-and-time/"/>
    <id>http://aword.net/python-date-and-time/</id>
    <published>2017-11-03T15:12:00.000Z</published>
    <updated>2021-12-30T15:37:15.376Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://cdn.aword.net/images/Uummannaq_ZH-CN11265049839_1920x1080.jpg" alt="乌玛纳克，格陵兰岛"></p><p>datetime是Python处理日期和时间的标准库。</p><span id="more"></span><h2 id="获取当前日期和时间"><a href="#获取当前日期和时间" class="headerlink" title="获取当前日期和时间"></a>获取当前日期和时间</h2><p>我们先看如何获取当前日期和时间：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now = datetime.now() <span class="comment"># 获取当前datetime</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(now)</span><br><span class="line"><span class="number">2015</span>-05-<span class="number">18</span> <span class="number">16</span>:<span class="number">28</span>:<span class="number">07.198690</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">type</span>(now))</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">datetime</span>.<span class="title">datetime</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>注意到<code>datetime</code>是模块，<code>datetime</code>模块还包含一个<code>datetime</code>类，通过<code>from datetime import datetime</code>导入的才是<code>datetime</code>这个类。</p><p>如果仅导入<code>import datetime</code>，则必须引用全名<code>datetime.datetime</code>。</p><p><code>datetime.now()</code>返回当前日期和时间，其类型是<code>datetime</code>。</p><h2 id="获取指定日期和时间"><a href="#获取指定日期和时间" class="headerlink" title="获取指定日期和时间"></a>获取指定日期和时间</h2><p>要指定某个日期和时间，我们直接用参数构造一个<code>datetime</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt = datetime(<span class="number">2015</span>, <span class="number">4</span>, <span class="number">19</span>, <span class="number">12</span>, <span class="number">20</span>) <span class="comment"># 用指定日期时间创建datetime</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(dt)</span><br><span class="line"><span class="number">2015</span>-04-<span class="number">19</span> <span class="number">12</span>:<span class="number">20</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><h2 id="datetime转换为timestamp"><a href="#datetime转换为timestamp" class="headerlink" title="datetime转换为timestamp"></a>datetime转换为timestamp</h2><p>在计算机中，时间实际上是用数字表示的。我们把1970年1月1日 00:00:00 UTC+00:00时区的时刻称为epoch time，记为<code>0</code>（1970年以前的时间timestamp为负数），当前时间就是相对于epoch time的秒数，称为timestamp。</p><p>你可以认为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timestamp = <span class="number">0</span> = <span class="number">1970</span>-<span class="number">1</span>-<span class="number">1</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> UTC+<span class="number">0</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><p>对应的北京时间是：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timestamp = <span class="number">0</span> = <span class="number">1970</span>-<span class="number">1</span>-<span class="number">1</span> 08:<span class="number">00</span>:<span class="number">00</span> UTC+<span class="number">8</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><p>可见timestamp的值与时区毫无关系，因为timestamp一旦确定，其UTC时间就确定了，转换到任意时区的时间也是完全确定的，这就是为什么计算机存储的当前时间是以timestamp表示的，因为全球各地的计算机在任意时刻的timestamp都是完全相同的（假定时间已校准）。</p><p>把一个<code>datetime</code>类型转换为timestamp只需要简单调用<code>timestamp()</code>方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt = datetime(<span class="number">2015</span>, <span class="number">4</span>, <span class="number">19</span>, <span class="number">12</span>, <span class="number">20</span>) <span class="comment"># 用指定日期时间创建datetime</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.timestamp() <span class="comment"># 把datetime转换为timestamp</span></span><br><span class="line"><span class="number">1429417200.0</span></span><br></pre></td></tr></table></figure><p>注意Python的timestamp是一个浮点数。如果有小数位，小数位表示毫秒数。</p><p>某些编程语言（如Java和JavaScript）的timestamp使用整数表示毫秒数，这种情况下只需要把timestamp除以1000就得到Python的浮点表示方法。</p><h2 id="timestamp转换为datetime"><a href="#timestamp转换为datetime" class="headerlink" title="timestamp转换为datetime"></a>timestamp转换为datetime</h2><p>要把timestamp转换为<code>datetime</code>，使用<code>datetime</code>提供的<code>fromtimestamp()</code>方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = <span class="number">1429417200.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(datetime.fromtimestamp(t))</span><br><span class="line"><span class="number">2015</span>-04-<span class="number">19</span> <span class="number">12</span>:<span class="number">20</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><p>注意到timestamp是一个浮点数，它没有时区的概念，而datetime是有时区的。上述转换是在timestamp和本地时间做转换。</p><p>本地时间是指当前操作系统设定的时区。例如北京时区是东8区，则本地时间：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2015</span>-04-<span class="number">19</span> <span class="number">12</span>:<span class="number">20</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><p>实际上就是UTC+8:00时区的时间：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2015</span>-04-<span class="number">19</span> <span class="number">12</span>:<span class="number">20</span>:<span class="number">00</span> UTC+<span class="number">8</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><p>而此刻的格林威治标准时间与北京时间差了8小时，也就是UTC+0:00时区的时间应该是：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2015</span>-04-<span class="number">19</span> 04:<span class="number">20</span>:<span class="number">00</span> UTC+<span class="number">0</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><p>timestamp也可以直接被转换到UTC标准时区的时间：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = <span class="number">1429417200.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(datetime.fromtimestamp(t)) <span class="comment"># 本地时间</span></span><br><span class="line"><span class="number">2015</span>-04-<span class="number">19</span> <span class="number">12</span>:<span class="number">20</span>:<span class="number">00</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(datetime.utcfromtimestamp(t)) <span class="comment"># UTC时间</span></span><br><span class="line"><span class="number">2015</span>-04-<span class="number">19</span> 04:<span class="number">20</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure><h2 id="str转换为datetime"><a href="#str转换为datetime" class="headerlink" title="str转换为datetime"></a>str转换为datetime</h2><p>很多时候，用户输入的日期和时间是字符串，要处理日期和时间，首先必须把str转换为datetime。转换方法是通过<code>datetime.strptime()</code>实现，需要一个日期和时间的格式化字符串：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cday = datetime.strptime(<span class="string">&#x27;2015-6-1 18:19:59&#x27;</span>, <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(cday)</span><br><span class="line"><span class="number">2015</span>-06-01 <span class="number">18</span>:<span class="number">19</span>:<span class="number">59</span></span><br></pre></td></tr></table></figure><p>字符串<code>&#39;%Y-%m-%d %H:%M:%S&#39;</code>规定了日期和时间部分的格式。详细的说明请参考<a href="https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior">Python文档</a>。</p><p>注意转换后的datetime是没有时区信息的。</p><h2 id="datetime转换为str"><a href="#datetime转换为str" class="headerlink" title="datetime转换为str"></a>datetime转换为str</h2><p>如果已经有了datetime对象，要把它格式化为字符串显示给用户，就需要转换为str，转换方法是通过<code>strftime()</code>实现的，同样需要一个日期和时间的格式化字符串：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now = datetime.now()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(now.strftime(<span class="string">&#x27;%a, %b %d %H:%M&#x27;</span>))</span><br><span class="line">Mon, May 05 <span class="number">16</span>:<span class="number">28</span></span><br></pre></td></tr></table></figure><h2 id="datetime加减"><a href="#datetime加减" class="headerlink" title="datetime加减"></a>datetime加减</h2><p>对日期和时间进行加减实际上就是把datetime往后或往前计算，得到新的datetime。加减可以直接用<code>+</code>和<code>-</code>运算符，不过需要导入<code>timedelta</code>这个类：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now = datetime.now()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now</span><br><span class="line">datetime.datetime(<span class="number">2015</span>, <span class="number">5</span>, <span class="number">18</span>, <span class="number">16</span>, <span class="number">57</span>, <span class="number">3</span>, <span class="number">540997</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now + timedelta(hours=<span class="number">10</span>)</span><br><span class="line">datetime.datetime(<span class="number">2015</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">2</span>, <span class="number">57</span>, <span class="number">3</span>, <span class="number">540997</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now - timedelta(days=<span class="number">1</span>)</span><br><span class="line">datetime.datetime(<span class="number">2015</span>, <span class="number">5</span>, <span class="number">17</span>, <span class="number">16</span>, <span class="number">57</span>, <span class="number">3</span>, <span class="number">540997</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now + timedelta(days=<span class="number">2</span>, hours=<span class="number">12</span>)</span><br><span class="line">datetime.datetime(<span class="number">2015</span>, <span class="number">5</span>, <span class="number">21</span>, <span class="number">4</span>, <span class="number">57</span>, <span class="number">3</span>, <span class="number">540997</span>)</span><br></pre></td></tr></table></figure><p>可见，使用<code>timedelta</code>你可以很容易地算出前几天和后几天的时刻。</p><h2 id="本地时间转换为UTC时间"><a href="#本地时间转换为UTC时间" class="headerlink" title="本地时间转换为UTC时间"></a>本地时间转换为UTC时间</h2><p>本地时间是指系统设定时区的时间，例如北京时间是UTC+8:00时区的时间，而UTC时间指UTC+0:00时区的时间。</p><p>一个<code>datetime</code>类型有一个时区属性<code>tzinfo</code>，但是默认为<code>None</code>，所以无法区分这个<code>datetime</code>到底是哪个时区，除非强行给<code>datetime</code>设置一个时区：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta, timezone</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tz_utc_8 = timezone(timedelta(hours=<span class="number">8</span>)) <span class="comment"># 创建时区UTC+8:00</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now = datetime.now()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now</span><br><span class="line">datetime.datetime(<span class="number">2015</span>, <span class="number">5</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">871012</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt = now.replace(tzinfo=tz_utc_8) <span class="comment"># 强制设置为UTC+8:00</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt</span><br><span class="line">datetime.datetime(<span class="number">2015</span>, <span class="number">5</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">871012</span>, tzinfo=datetime.timezone(datetime.timedelta(<span class="number">0</span>, <span class="number">28800</span>)))</span><br></pre></td></tr></table></figure><p>如果系统时区恰好是UTC+8:00，那么上述代码就是正确的，否则，不能强制设置为UTC+8:00时区。</p><h2 id="时区转换"><a href="#时区转换" class="headerlink" title="时区转换"></a>时区转换</h2><p>我们可以先通过<code>utcnow()</code>拿到当前的UTC时间，再转换为任意时区的时间：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拿到UTC时间，并强制设置时区为UTC+0:00:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>utc_dt = datetime.utcnow().replace(tzinfo=timezone.utc)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(utc_dt)</span><br><span class="line"><span class="number">2015</span>-05-<span class="number">18</span> 09:05:<span class="number">12.377316</span>+<span class="number">00</span>:<span class="number">00</span></span><br><span class="line"><span class="comment"># astimezone()将转换时区为北京时间:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bj_dt = utc_dt.astimezone(timezone(timedelta(hours=<span class="number">8</span>)))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(bj_dt)</span><br><span class="line"><span class="number">2015</span>-05-<span class="number">18</span> <span class="number">17</span>:05:<span class="number">12.377316</span>+08:<span class="number">00</span></span><br><span class="line"><span class="comment"># astimezone()将转换时区为东京时间:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tokyo_dt = utc_dt.astimezone(timezone(timedelta(hours=<span class="number">9</span>)))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(tokyo_dt)</span><br><span class="line"><span class="number">2015</span>-05-<span class="number">18</span> <span class="number">18</span>:05:<span class="number">12.377316</span>+09:<span class="number">00</span></span><br><span class="line"><span class="comment"># astimezone()将bj_dt转换时区为东京时间:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tokyo_dt2 = bj_dt.astimezone(timezone(timedelta(hours=<span class="number">9</span>)))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(tokyo_dt2)</span><br><span class="line"><span class="number">2015</span>-05-<span class="number">18</span> <span class="number">18</span>:05:<span class="number">12.377316</span>+09:<span class="number">00</span></span><br></pre></td></tr></table></figure><p>时区转换的关键在于，拿到一个<code>datetime</code>时，要获知其正确的时区，然后强制设置时区，作为基准时间。</p><p>利用带时区的<code>datetime</code>，通过<code>astimezone()</code>方法，可以转换到任意时区。</p><p>注：不是必须从UTC+0:00时区转换到其他时区，任何带时区的<code>datetime</code>都可以正确转换，例如上述<code>bj_dt</code>到<code>tokyo_dt</code>的转换。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p><code>datetime</code>表示的时间需要时区信息才能确定一个特定的时间，否则只能视为本地时间。</p><p>如果要存储<code>datetime</code>，最佳方法是将其转换为timestamp再存储，因为timestamp的值与时区完全无关。</p><h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>python中时间日期格式化符号：</p><ul><li>%y 两位数的年份表示（00-99）</li><li>%Y 四位数的年份表示（000-9999）</li><li>%m 月份（01-12）</li><li>%d 月内中的一天（0-31）</li><li>%H 24小时制小时数（0-23）</li><li>%I 12小时制小时数（01-12）</li><li>%M 分钟数（00=59）</li><li>%S 秒（00-59）</li><li>%a 本地简化星期名称</li><li>%A 本地完整星期名称</li><li>%b 本地简化的月份名称</li><li>%B 本地完整的月份名称</li><li>%c 本地相应的日期表示和时间表示</li><li>%j 年内的一天（001-366）</li><li>%p 本地A.M.或P.M.的等价符</li><li>%U 一年中的星期数（00-53）星期天为星期的开始</li><li>%w 星期（0-6），星期天为星期的开始</li><li>%W 一年中的星期数（00-53）星期一为星期的开始</li><li>%x 本地相应的日期表示</li><li>%X 本地相应的时间表示</li><li>%Z 当前时区的名称</li><li>%% %号本身</li></ul><hr><p>本文转自 <a href="https://www.liaoxuefeng.com/">廖雪峰的 Python 教程</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://cdn.aword.net/images/Uummannaq_ZH-CN11265049839_1920x1080.jpg&quot; alt=&quot;乌玛纳克，格陵兰岛&quot;&gt;&lt;/p&gt;
&lt;p&gt;datetime是Python处理日期和时间的标准库。&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="http://aword.net/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="教程" scheme="http://aword.net/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="Python" scheme="http://aword.net/tags/Python/"/>
    
  </entry>
  
</feed>
